<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1732px" preserveAspectRatio="none" style="width:598px;height:1732px;" version="1.1" viewBox="0 0 598 1732" width="598px" zoomAndPan="magnify"><defs><filter height="300%" id="f5zh0tjso4795" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="1717.6337" style="stroke: #A80036; stroke-width: 1.0;" width="249" x="148" y="4"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="248" y="16.792">Backend</text><rect fill="#DDDDDD" height="1717.6337" style="stroke: #A80036; stroke-width: 1.0;" width="151" x="419" y="4"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="53" x="468" y="16.792">Keycloak</text><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="401.4332" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="181" y="330.326"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="42.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="689.4182"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="449.5023" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="181" y="806.4413"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="164.0461" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="181" y="1451.9897"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370" y="503.3721"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370" y="1555.3537"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="164.621"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="225.303"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="417.3491"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="1330.6256"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="1391.3077"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="87.023" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="528.5" y="564.0542"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="217.7512" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="528.5" y="1007.8514"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="239.7281" style="stroke: #000000; stroke-width: 2.0;" width="434" x="142" y="462.6901"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="30" x2="30" y1="87.9389" y2="1634.0358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="93" x2="93" y1="87.9389" y2="1634.0358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="186" x2="186" y1="87.9389" y2="1634.0358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="375" x2="375" y1="87.9389" y2="1634.0358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="457" x2="457" y1="87.9389" y2="1634.0358"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="533" x2="533" y1="87.9389" y2="1634.0358"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="8" y="84.117">Beavis</text><ellipse cx="30" cy="13.341" fill="#FEFECE" filter="url(#f5zh0tjso4795)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M30,21.341 L30,48.341 M17,29.341 L43,29.341 M30,48.341 L17,63.341 M30,48.341 L43,63.341 " fill="none" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="38" x="8" y="1646.8117">Beavis</text><ellipse cx="30" cy="1660.6337" fill="#FEFECE" filter="url(#f5zh0tjso4795)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M30,1668.6337 L30,1695.6337 M17,1676.6337 L43,1676.6337 M30,1695.6337 L17,1710.6337 M30,1695.6337 L43,1710.6337 " fill="none" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="62" y="84.117">Butthead</text><ellipse cx="93" cy="13.341" fill="#FEFECE" filter="url(#f5zh0tjso4795)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93,21.341 L93,48.341 M80,29.341 L106,29.341 M93,48.341 L80,63.341 M93,48.341 L106,63.341 " fill="none" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="56" x="62" y="1646.8117">Butthead</text><ellipse cx="93" cy="1660.6337" fill="#FEFECE" filter="url(#f5zh0tjso4795)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M93,1668.6337 L93,1695.6337 M80,1676.6337 L106,1676.6337 M93,1695.6337 L80,1710.6337 M93,1695.6337 L106,1710.6337 " fill="none" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f5zh0tjso4795)" height="31.5979" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="162" y="51.341"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="169" y="72.117">REST</text><rect fill="#FEFECE" filter="url(#f5zh0tjso4795)" height="31.5979" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="162" y="1633.0358"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="169" y="1653.8117">REST</text><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="17" x="363.5" y="84.117">DB</text><path d="M357,34.341 C357,24.341 375,24.341 375,24.341 C375,24.341 393,24.341 393,34.341 L393,60.341 C393,70.341 375,70.341 375,70.341 C375,70.341 357,70.341 357,60.341 L357,34.341 " fill="#FEFECE" filter="url(#f5zh0tjso4795)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M357,34.341 C357,44.341 375,44.341 375,44.341 C375,44.341 393,44.341 393,34.341 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="17" x="363.5" y="1646.8117">DB</text><path d="M357,1660.6337 C357,1650.6337 375,1650.6337 375,1650.6337 C375,1650.6337 393,1650.6337 393,1660.6337 L393,1686.6337 C393,1696.6337 375,1696.6337 375,1696.6337 C375,1696.6337 357,1696.6337 357,1686.6337 L357,1660.6337 " fill="#FEFECE" filter="url(#f5zh0tjso4795)" style="stroke: #000000; stroke-width: 1.5;"/><path d="M357,1660.6337 C357,1670.6337 375,1670.6337 375,1670.6337 C375,1670.6337 393,1670.6337 393,1660.6337 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f5zh0tjso4795)" height="31.5979" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="433" y="51.341"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="440" y="72.117">OIDC</text><rect fill="#FEFECE" filter="url(#f5zh0tjso4795)" height="31.5979" style="stroke: #A80036; stroke-width: 1.5;" width="44" x="433" y="1633.0358"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="440" y="1653.8117">OIDC</text><rect fill="#FEFECE" filter="url(#f5zh0tjso4795)" height="31.5979" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="511" y="51.341"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="518" y="72.117">UMA</text><rect fill="#FEFECE" filter="url(#f5zh0tjso4795)" height="31.5979" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="511" y="1633.0358"/><text fill="#000000" font-family="Source Sans Pro" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="518" y="1653.8117">UMA</text><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="401.4332" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="181" y="330.326"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="42.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="689.4182"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="449.5023" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="181" y="806.4413"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="164.0461" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="181" y="1451.9897"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370" y="503.3721"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="370" y="1555.3537"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="164.621"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="225.303"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="417.3491"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="1330.6256"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="30.341" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="452" y="1391.3077"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="87.023" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="528.5" y="564.0542"/><rect fill="#FFFFFF" filter="url(#f5zh0tjso4795)" height="217.7512" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="528.5" y="1007.8514"/><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="583" x="3" y="119.1094"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="119.1094" y2="119.1094"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="122.1094" y2="122.1094"/><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="24.341" style="stroke: #000000; stroke-width: 2.0;" width="91" x="249" y="107.9389"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="255" y="124.7309">Authenticate</text><polygon fill="#A80036" points="440,160.621,450,164.621,440,168.621,444,164.621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="30" x2="446" y1="164.621" y2="164.621"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="37" y="159.072">[1]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="56" y="159.072">&lt;&lt;authenticate&gt;&gt;</text><polygon fill="#A80036" points="41,190.962,31,194.962,41,198.962,37,194.962" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="35" x2="456" y1="194.962" y2="194.962"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="47" y="189.413">[2]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="66" y="189.413">access_token</text><polygon fill="#A80036" points="440,221.303,450,225.303,440,229.303,444,225.303" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="30" x2="446" y1="225.303" y2="225.303"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="37" y="219.754">[3]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="56" y="219.754">&lt;&lt;authorize&gt;&gt;</text><polygon fill="#A80036" points="41,251.644,31,255.644,41,259.644,37,255.644" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="35" x2="456" y1="255.644" y2="255.644"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="47" y="250.095">[4]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="66" y="250.095">rpt</text><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="583" x="3" y="284.8145"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="284.8145" y2="284.8145"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="287.8145" y2="287.8145"/><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="24.341" style="stroke: #000000; stroke-width: 2.0;" width="112" x="238.5" y="273.644"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="95" x="244.5" y="290.436">Create Resource</text><polygon fill="#A80036" points="169,326.326,179,330.326,169,334.326,173,330.326" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="30" x2="175" y1="330.326" y2="330.326"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="37" y="324.777">[5]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="56" y="324.777">&lt;&lt;create&gt;&gt;</text><path d="M35,343.326 L35,385.326 L206,385.326 L206,353.326 L196,343.326 L35,343.326 " fill="#FBFB77" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M196,343.326 L196,353.326 L206,353.326 L196,343.326 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="41" y="361.1181">POST /stuff</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="41" y="377.4591">Authorization: Bearer ${rpt}</text><polygon fill="#A80036" points="440,413.3491,450,417.3491,440,421.3491,444,417.3491" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="446" y1="417.3491" y2="417.3491"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="198" y="411.8001">[6]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="217" y="411.8001">&lt;&lt;authenticate&gt;&gt;</text><polygon fill="#A80036" points="202,443.6901,192,447.6901,202,451.6901,198,447.6901" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="196" x2="456" y1="447.6901" y2="447.6901"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="208" y="442.1411">[7]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="227" y="442.1411">client_token</text><path d="M142,462.6901 L253,462.6901 L253,470.6901 L243,480.6901 L142,480.6901 L142,462.6901 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="239.7281" style="stroke: #000000; stroke-width: 2.0;" width="434" x="142" y="462.6901"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="157" y="476.4821">transaction</text><polygon fill="#A80036" points="358,499.3721,368,503.3721,358,507.3721,362,503.3721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="364" y1="503.3721" y2="503.3721"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="198" y="497.8231">[8]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="217" y="497.8231">&lt;&lt;create entity&gt;&gt;</text><polygon fill="#A80036" points="202,529.7131,192,533.7131,202,537.7131,198,533.7131" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="196" x2="374" y1="533.7131" y2="533.7131"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="15" x="208" y="528.1641">[9]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="227" y="528.1641">&lt;&lt;entity ID&gt;&gt;</text><polygon fill="#A80036" points="516.5,560.0542,526.5,564.0542,516.5,568.0542,520.5,564.0542" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="522.5" y1="564.0542" y2="564.0542"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="198" y="558.5052">[10]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="224" y="558.5052">&lt;&lt;create resource&gt;&gt;</text><path d="M196,577.0542 L196,619.0542 L467,619.0542 L467,587.0542 L457,577.0542 L196,577.0542 " fill="#FBFB77" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M457,577.0542 L457,587.0542 L467,587.0542 L457,577.0542 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="202" y="594.8462">POST ${realm}/authz/protection/resource_set</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="202" y="611.1872">Authorization: Bearer ${client_token}</text><polygon fill="#A80036" points="202,647.0772,192,651.0772,202,655.0772,198,651.0772" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="196" x2="532.5" y1="651.0772" y2="651.0772"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="208" y="645.5282">[11]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="234" y="645.5282">&lt;&lt;resource ID&gt;&gt;</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="238" y1="676.4182" y2="676.4182"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="238" x2="238" y1="676.4182" y2="689.4182"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="197" x2="238" y1="689.4182" y2="689.4182"/><polygon fill="#A80036" points="207,685.4182,197,689.4182,207,693.4182,203,689.4182" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="203" y="670.8692">[12]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="229" y="670.8692">&lt;&lt; associate ID and RID &gt;&gt;</text><polygon fill="#A80036" points="41,727.7592,31,731.7592,41,735.7592,37,731.7592" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="35" x2="185" y1="731.7592" y2="731.7592"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="47" y="726.2102">[13]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="73" y="726.2102">201 Created</text><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="583" x="3" y="760.9297"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="760.9297" y2="760.9297"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="763.9297" y2="763.9297"/><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="24.341" style="stroke: #000000; stroke-width: 2.0;" width="106" x="241.5" y="749.7592"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="247.5" y="766.5512">Share Resource</text><polygon fill="#A80036" points="169,802.4413,179,806.4413,169,810.4413,173,806.4413" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="30" x2="175" y1="806.4413" y2="806.4413"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="37" y="800.8923">[14]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="63" y="800.8923">&lt;&lt;share&gt;&gt;</text><path d="M35,819.4413 L35,976.4413 L238,976.4413 L238,829.4413 L228,819.4413 L35,819.4413 " fill="#FBFB77" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M228,819.4413 L228,829.4413 L238,829.4413 L228,819.4413 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="127" x="41" y="837.2333">POST /stuff/${ID}/share</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="44" y="853.5743"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="41" y="869.9153">Authorization: Bearer ${rpt}</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="41" y="886.2563">Content-Type: application/json'</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="41" y="902.5973">{</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="53" y="918.9384">"requester": "123-456-789",</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="53" y="935.2794">"requesterName":</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="66" x="154" y="935.2794">"butthead"</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="3" x="220" y="935.2794">,</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="53" y="951.6204">"scopes": [</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="114" y="951.6204">"stuff:read"</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="187" y="951.6204">]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="41" y="967.9614">}</text><polygon fill="#A80036" points="516.5,1003.8514,526.5,1007.8514,516.5,1011.8514,520.5,1007.8514" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="522.5" y1="1007.8514" y2="1007.8514"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="198" y="1002.3024">[15]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="224" y="1002.3024">&lt;&lt;create permission ticket&gt;&gt;</text><path d="M196,1020.8514 L196,1193.8514 L491,1193.8514 L491,1030.8514 L481,1020.8514 L196,1020.8514 " fill="#FBFB77" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M481,1020.8514 L481,1030.8514 L491,1030.8514 L481,1020.8514 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="274" x="202" y="1038.6434">POST ${realm}/authz/protection/permission/ticket</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="205" y="1054.9844"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="202" y="1071.3255">Authorization: Bearer ${rpt}</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="202" y="1087.6665">Content-Type: application/json'</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="202" y="1104.0075">{</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="208" y="1120.3485">"resource": "${resource_id}",</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="208" y="1136.6895">"requester": "${user_id}",</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="208" y="1153.0305">"granted": true,</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="208" y="1169.3715">"scopeName":</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="289" y="1169.3715">"stuff:read"</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="202" y="1185.7126">}</text><polygon fill="#A80036" points="202,1221.6026,192,1225.6026,202,1229.6026,198,1225.6026" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="196" x2="532.5" y1="1225.6026" y2="1225.6026"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="208" y="1220.0536">[16]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="234" y="1220.0536">201 Created</text><polygon fill="#A80036" points="41,1251.9436,31,1255.9436,41,1259.9436,37,1255.9436" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="35" x2="185" y1="1255.9436" y2="1255.9436"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="47" y="1250.3946">[17]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="73" y="1250.3946">201 Created</text><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="583" x="3" y="1285.1141"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="1285.1141" y2="1285.1141"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="586" y1="1288.1141" y2="1288.1141"/><rect fill="#EEEEEE" filter="url(#f5zh0tjso4795)" height="24.341" style="stroke: #000000; stroke-width: 2.0;" width="111" x="239" y="1273.9436"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="245" y="1290.7356">Access Resource</text><polygon fill="#A80036" points="440,1326.6256,450,1330.6256,440,1334.6256,444,1330.6256" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="446" y1="1330.6256" y2="1330.6256"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="100" y="1325.0766">[18]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="126" y="1325.0766">&lt;&lt;authenticate&gt;&gt;</text><polygon fill="#A80036" points="104,1356.9666,94,1360.9666,104,1364.9666,100,1360.9666" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="98" x2="456" y1="1360.9666" y2="1360.9666"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="110" y="1355.4176">[19]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="72" x="136" y="1355.4176">access_token</text><polygon fill="#A80036" points="440,1387.3077,450,1391.3077,440,1395.3077,444,1391.3077" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="446" y1="1391.3077" y2="1391.3077"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="100" y="1385.7586">[20]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="126" y="1385.7586">&lt;&lt;authorize&gt;&gt;</text><polygon fill="#A80036" points="104,1417.6487,94,1421.6487,104,1425.6487,100,1421.6487" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="98" x2="456" y1="1421.6487" y2="1421.6487"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="110" y="1416.0997">[21]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="16" x="136" y="1416.0997">rpt</text><polygon fill="#A80036" points="169,1447.9897,179,1451.9897,169,1455.9897,173,1451.9897" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="93" x2="175" y1="1451.9897" y2="1451.9897"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="100" y="1446.4407">[22]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="126" y="1446.4407">&lt;&lt;get&gt;&gt;</text><path d="M98,1464.9897 L98,1523.9897 L269,1523.9897 L269,1474.9897 L259,1464.9897 L98,1464.9897 " fill="#FBFB77" filter="url(#f5zh0tjso4795)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M259,1464.9897 L259,1474.9897 L269,1474.9897 L259,1464.9897 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="104" y="1482.7817">GET /stuff/${ID}</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="107" y="1499.1227"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="104" y="1515.4637">Authorization: Bearer ${rpt}</text><polygon fill="#A80036" points="358,1551.3537,368,1555.3537,358,1559.3537,362,1555.3537" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="364" y1="1555.3537" y2="1555.3537"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="198" y="1549.8047">[23]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="224" y="1549.8047">&lt;&lt;get entity&gt;&gt;</text><polygon fill="#A80036" points="202,1581.6948,192,1585.6948,202,1589.6948,198,1585.6948" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="196" x2="374" y1="1585.6948" y2="1585.6948"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="208" y="1580.1458">[24]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="237" y="1580.1458"/><polygon fill="#A80036" points="104,1612.0358,94,1616.0358,104,1620.0358,100,1616.0358" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="98" x2="185" y1="1616.0358" y2="1616.0358"/><text fill="#000000" font-family="Source Sans Pro" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="110" y="1610.4868">[25]</text><text fill="#000000" font-family="Source Sans Pro" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="136" y="1610.4868">200 OK</text><!--
@startuml

skinparam backgroundColor #FFFFFF
skinparam defaultFontName "Source Sans Pro"
skinparam ParticipantPadding 10
skinparam BoxPadding 10

actor Beavis
actor Butthead

box "Backend"
    participant REST
    database DB
end box

box "Keycloak"
    participant OIDC
    participant UMA
end box

autonumber "<b>[##]</b>"
autoactivate on

== Authenticate ==

Beavis -> OIDC: <<authenticate>>
return access_token
Beavis -> OIDC: <<authorize>>
return rpt

== Create Resource ==

Beavis -> REST: <<create>>
note right of Beavis
    POST /stuff
    Authorization: Bearer ${rpt}
end note
REST -> OIDC: <<authenticate>>
return client_token
group transaction
REST -> DB: <<create entity>>
return <<entity ID>>
REST -> UMA: <<create resource>>
note right of REST
    POST ${realm}/authz/protection/resource_set
    Authorization: Bearer ${client_token}
end note
return <<resource ID>>
REST -> REST: << associate ID and RID >>
end
REST - -> Beavis: 201 Created
deactivate REST

== Share Resource ==

Beavis -> REST: <<share>>
note right of Beavis
    POST /stuff/${ID}/share

    Authorization: Bearer ${rpt}
    Content-Type: application/json'
    {
        "requester": "123-456-789",
        "requesterName": <b>"butthead"</b>,
        "scopes": [ <b>"stuff:read"</b> ]
    }
end note
REST -> UMA: <<create permission ticket>>
note right of REST
    POST ${realm}/authz/protection/permission/ticket

    Authorization: Bearer ${rpt}
    Content-Type: application/json'
    {
      "resource": "${resource_id}",
      "requester": "${user_id}",
      "granted": true,
      "scopeName": <b>"stuff:read"</b>
    }
end note
return 201 Created
REST - -> Beavis: 201 Created

== Access Resource ==

Butthead -> OIDC: <<authenticate>>
return access_token
Butthead -> OIDC: <<authorize>>
return rpt
Butthead -> REST: <<get>>
note right of Butthead
    GET /stuff/${ID}

    Authorization: Bearer ${rpt}
end note
REST -> DB: <<get entity>>
return
REST - -> Butthead: 200 OK

@enduml

PlantUML version 1.2019.08(Sat Jul 13 22:25:14 MSK 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_212-b04
Operating System: Linux
OS Version: 5.1.14-desktop-1.mga7
Default Encoding: UTF-8
Language: ru
Country: RU
--></g></svg>